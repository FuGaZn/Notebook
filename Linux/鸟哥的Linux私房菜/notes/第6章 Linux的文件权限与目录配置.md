[TOC]

## Linux文件权限概念

### 文件属性

执行ls -al后显示的内容：

```
drwxr-xr-x.	  2    fjx     fjx     17     9月  17 17:03   桌面
  [权限]    [连接][所有者][用户组][文件容量] [修改日期]     [文件名]
```

其中：

第一列[drwxr-xr-x]代表这个文件的类型和权限，这一串字符一共有10位。

第一位代表文件类型：”目录、文件或者链接文件等“

- 若是[d]，代表目录
- 若是 [-]，代表文件
- 若是 [l]，代表连接文件（linkfile)
- 若是[b]，代表设备文件里面的可供存储的接口设备
- 若是[c]，代表设备文件里面的串行端口设备，如键盘、鼠标

接下来的字符中，以3个为一组，且均为rwx的3个参数的组合，r代表可读，w代表可写，x代表可执行(execute)

- 第一组是文件所有者的权限
- 第二组是同用户组的权限
- 第三组是其他非本用户组的权限

<br>

第二列表示有多少文件名连接到此节点

第五列为这个文件的容量大小，默认单位是B

第七列是文件名，如果文件名前有一个"."，代表这个文件是隐藏文件。



### 改变文件属性和权限

- chgrp：改变文件所属用户组


- chown：改变文件所有者


- chmod：改变文件权限



改变所属用户组：

```
# chgrp [-R] dirname/filename ...
```

-R：进行递归持续更改，即连同子目录下所有文件、目录都更新为这个用户组

使用示例：

chgrp users install.log		// 把install.log的用户组改为users

注意：如果用户组不存在，会报错

<br>

改变文件所有者

```
# chown [-R] 账号名称 文件或目录
# chown [-R] 账号名称:组名 文件或目录
```

chown也可以单独修改用户组：

```
# chown [-R] .组名 文件或目录
```

<br>

改变文件权限

Linux中可以用数组代表各个权限：

- r：4
- w：2
- x：1

每种身份的各自三个权限分数是需要累加的

```
# chmod [-R] xyz 文件或目录
// xyz就是owner、group、others三个身份各自权限的累加值
```

比如：chmod 777 .bashrc


<br>

另一种方法改变权限：

用u、g、o来代表三种身份（a代表全部身份），权限则用r、w、x表示。

语法：

chmod |  u <br>g <br>o <br>a <br> |+(加入)<br>-(除去)<br>=(设置)|文件或目录
---|---|---|---

示例：

chmod  u=rwx, go=rx .bashrc



一些命令：

- mkdir：创建目录
- touch：创建文件



### 文件种类和扩展名

文件种类：

- 普通文件(regular file)	[-]

- - 纯文本文件(ASCII)
  - 二进制文件(binary)
  - 数据格式文件(data)

- 目录 [d]

- 连接文件 [l]

- 设备和设备文件

- - 块(block)设备文件：存储数据的接口设备，如硬盘等。[b]
  - 字符(character)设备文件：串行端口的接口设备，如鼠标键盘。[c]

- 套接字(sockets) [s]

  数据接口文件，通常被用在网络上的数据连接

- 管道(FIFO) [p]



文件扩展名：

在Linux中，一个文件能否被执行，主要看第一列的第10个属性，和文件名(扩展名)没有关系



## 目录配置

### 目录配置标准

FHS(Filesystem Hierarchy Standard)

FHS根据文件使用是否频繁和是否允许用户随意改动，将目录定义成四种交互作用的形态：可分享的、不可分享的、不变的、可变动的

可分享的：能够分享给网络上其他主机挂载用的

不变的：函数库、文件说明文件、主机服务配置文件等

<br>



FHS针对目录树架构的三层定义：

- /：根目录，与开机系统有关
- /usr：与软件安装/执行有关 UNIX software resource
- /var：与系统运作过程有关 variable

根目录所在分区越小越好，且应用程序所安装的软件最好不要与根目录放在同一分区内。



/目录下应该要有的子目录及其作用

| 目录     | 应放置文件内容                                  |
| ------ | ---------------------------------------- |
| /bin   | 单用户维护模式下还能被操作的命令，如cat/chmod/chown/mk/mkdir... |
| /boot  | 开机会使用到的文件                                |
| /dev   | 任何设备与接口设备都是以文件的形式存放在这个目录中                |
| /etc   | 系统主要的配置文件，如账号密码、各种服务的起始文件等。FHS建议不要把可执行文件放在这个目录下。 |
| /home  | 系统默认的用户主文件夹。<br>主文件夹有两种代号：<br>~：目前这个用户的主文件夹<br>~dmt：dmt的主文件夹 |
| /lib   | 开机时会用到的函数库，以及在/bin或/sbin中的命令会调用的函数库      |
| /media | 可删除的设备，如软盘、光盘                            |
| /mnt   | 暂时挂载额外设备的目录                              |
| /opt   | 第三方软件放置的目录                               |
| /root  | 系统管理员的主文件夹，root的主文件夹和根目录应该放置在同一个分区中      |
| /sbin  | 开机过程中所需要的命令。                             |
| /srv   | 网络服务所需要取用的数据目录                           |
| /tmp   | 暂时放置文件的地方，所有人都能访问。最好不要放置重要文件             |

/etc、/bin、/dev、/lib、/sbin不能和根目录放置在不同的分区

<br>



/usr下放置的数据属于可分享的和不可变动的

